# Troubleshootings



### Installation path problems

Be careful to avoid the installation of Tomcat in paths having a space ‘‘ in folders: Windows operating system could have problems in recognizing the correct path.





### Installation listening port problems



Moreover, pay attention to the port configured in Tomcat: in Linux/Unix O.S. you could have to change OS settings in order to allow the use of that port by Tomcat.



In order to run Tomcat, you can execute the command tomcat/bin/catalina.sh run or catalina.bat run, according to the o.s. in use; pay attention to the fact that in Linux/Unix/MacOS o.s. you have to change the permissions for those files, in order to execute them, use the command: “chmod u=rwx \*.sh” to make these files executable.



If you have changed the HTTP port in tomcat/conf/server.xml file, the URL to use in the browser to connect to 4WS.Platform changes as well. Be careful not to use a port already used by other services. In order to check it out, open a shell and execute the command “netstat”: if a service is already using the same port, you will be see it through that command.





### Database connection problems



Another common problem is due to a wrong database connection configuration or because of the lack of the JDBC driver; any java program needs a JDBC driver to connect to a database. Remember to include it \(one or more .jar files\) into tomcat/lib folder. According to the database type you have chosen, you can download such a driver from the database vendor offical web site: search for JDBC driver in its web site.





In all these cases, check out the log generated by Tomcat when starting it: tomcat/logs/catalina.out or tomcat/logs/localhost.0.log



It will report any configuration error or problems like the ones described above.





### Execution problems



There could be problems when executing the product, due to several reasons:

**network connection problems between the web browser and the tomcat**

suggestions:

check the quality of the network between the two layers

check out the amount of data you send between the server and the client side \(e.g. the data provided to grids, lookups, remote combo boxes\); the way you configured an applicatio can have detrimental effects on the performance of the application itself



**network connection problems between Tomcat and a database server**

suggestions:

check the quality of the network between the two layers

check out if there is a firewall which could close database connections still opened after a while; Platform, as the majority of the web applications, uses a database connection pooler inside, in order to speed up the execution of the business logic; that means that these connections cannot be closed externally

check out if there is an automatism on the database server which closes connections on its side after a while



**memory consumption on Tomcat; there are two kinds of memories used by Tomcat: PermGen and Heap Memory. Each can be configured when defining the service which starts Tomcat or on the catalina.sh/bat o service.sh/bat files**



Typical settings for these memory are 256Mb for PermGen e 768Mb for the Heap Memory, but these should be changed according to the specific configured application.



In order to retrieve information about the current status of the web application, there is a public web service that can be invoked. This web service checks the availability of database connections to the main repository \(database\) and returns a HTTP 200 code in case fo successful test, otherwise, it returns a 500 error code + an error message reporting the cause of the problem.



Apart from the HTTP code, an HTML message is also provided, reporting times related to getting a connection and the execution time for a query: these times could be helpful to figure out if there is an overload on the database server.



The web service can be invoked through this URL:



http://host:port/platform/healthCheck



and it could be scheduled to be executed automatically through the Platform Scheduler: a notification email could be sent in case of 500 error code, to inform a system administrator abour a problem with the application.





The web service accepts two additional parameters, in order to fetch additional information:



checkAdditionalDatasources=Y



when adding this parameter to the URL, every configured additional data source will be checked out too. Time required to get the connection is also reported.



getAdditionalInfo=Y



when adding this parameter to the URL, every System property is also reported, as well as the memory usage \(total memory, used memory, free memory\).



Example of an URL which returns a detail info about the web application status:



http://host:port/platform/healthCheck?getAdditionalInfo=Y&checkAdditionalDatasourcesToo=Y

